!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ImagesPreview=e():t.ImagesPreview=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){if(t.naturalWidth)return{height:t.naturalHeight,width:t.naturalWidth};var e=new Image;return e.src=t.src,{height:e.height,width:e.width}}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),c=i(u),l=n(4),f=i(l),d=n(5),p=i(d),m=n(6),v=i(m),y=n(7),g=i(y),b=n(12),x=i(b),w=n(13),k=i(w),_=n(14),E=i(_),M=n(27),O=i(M),T=n(28),C=i(T),P=n(30),S=i(P),j=n(19),A=document,I=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];r(this,e);var i=o(this,Object.getPrototypeOf(e).call(this));return i.opts=n,n.convert=n.convert||function a(){return a},i.imgs=Array.prototype.slice.call(t),i._ontap=(0,k["default"])(i.ontap.bind(i)),i.status=[],i.loaded=[],n.bind!==!1&&p["default"].bind(document,"touchstart",i._ontap),i}return a(e,t),h(e,[{key:"ontap",value:function(t){var e=t.target,n=this.imgs.indexOf(e);n!==-1&&(this.show(),this.active(e,n,!0))}},{key:"show",value:function(){var t=this.container=document.createElement("div");t.id="images-preview";var e=Math.max(A.documentElement.clientWidth,window.innerWidth||0);t.style.width=e*this.imgs.length+40+"px",this.setTransform(-20),document.body.appendChild(t);var n=this.dots=(0,S["default"])('<div class="imgs-preview-dots"><ul></ul></div>');document.body.appendChild(n);for(var i=(0,f["default"])("ul",n),r=document.createDocumentFragment(),o=0,a=this.imgs.length;o<a;o++){i.appendChild(document.createElement("li"));var s=document.createElement("div");s.style.width=e+"px";var h=document.createElement("div"),u=this.imgs[o].src;if(h.className="wrapper",this.loaded.indexOf(o)!==-1){var c=this.createImage(h,u);c.style.display="block",this.positionWrapper(h,c)}else{h.appendChild((0,S["default"])('\n        <div class="mask" style="background-image:url(\''+u+"')\">\n        </div>"));var l=this.imgs[o].getBoundingClientRect();(0,O["default"])(h.style,{width:l.width-10+"px",height:l.height-10*l.height/l.width+"px",left:(e-(l.width-10))/2+"px",marginTop:"-"+l.height/2+"px"})}s.appendChild(h),r.appendChild(s)}t.appendChild(r),this.zooms=[]}},{key:"active",value:function(t,e){var n=this,i=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=Math.max(document.documentElement.clientWidth,window.innerWidth||0);null==e&&(e=this.imgs.indexOf(t));var o=this.status[e],a=this.container.querySelectorAll(".wrapper")[e];(0,c["default"])(this.dots.querySelectorAll("li")[e]);var s=e*r;this.setTransform(-s-20),o||!function(){if(n.status[e]="loading",i){var o=(0,f["default"])(".image",a);o&&(o.style.display="none");var h=(0,f["default"])(".mask",a);h&&(h.style.visibility="hidden");var u=n.holder=document.createElement("div");u.className="imgs-preview-holder";var c=t.src;u.style.backgroundImage="url('"+c+"')";var l=t.getBoundingClientRect();(0,O["default"])(u.style,{left:l.left+"px",top:l.top+"px",width:l.width+"px",height:l.height+"px"}),document.body.appendChild(u)}var d=n.createImage(a,t.src);i||(d.style.display="block");var p=new E["default"](a,{padding:5,tapreset:!0,draggable:!0,maxScale:4});p.on("swipe",function(t){var i="left"==t?e+1:e-1;i=Math.max(0,i),i=Math.min(n.imgs.length-1,i),n.animate(-i*r-20).then(function(){var t=n.imgs[i];n.active(t,i)})}),p.on("move",function(t){var e=-20-s-t;e=Math.min(0,e),e=Math.max(-40-(n.imgs.length-1)*r,e),n.setTransform(e),0!=t&&(p.speed=0)}),p.on("tap",n.hide.bind(n)),p.on("end",function(){var t=Math.round((-n.tx-20)/r);n.animate(-t*r-20).then(function(){var e=n.imgs[t];n.active(e,t)})}),n.zooms.push(p),p.draggable=!1,n.loadImage(d,a).then(function(){n.loaded.push(e),p.draggable=!0},function(){})}()}},{key:"loadImage",value:function(t,e){var n=this;if(t.complete){var i=(0,f["default"])(".mask",e);return i&&e.removeChild(i),this.positionWrapper(e,t),this.positionHolder(e,t.src,!1).then(function(){t.style.display="block"})}return this.positionHolder(e).then(function(){t.style.display="block";var i=(0,f["default"])(".mask",e);i.style.visibility="visible";var r=(0,S["default"])('<div class="spin"></div>');i.appendChild(r);var o=(0,C["default"])(r,{color:"#ffffff",duration:1e3,width:4}),a=n;return new Promise(function(n,r){function s(){o(),i.parentNode&&e.removeChild(i),a.positionWrapper(e,t),n()}return t.complete?s():(t.onload=s,void(t.onerror=function(t){o(),r(t)}))})})}},{key:"positionWrapper",value:function(t,e){var n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=s(e),r=(n-10)*i.height/i.width;(0,O["default"])(t.style,{left:"5px",width:n-10+"px",height:r+"px",marginTop:"-"+r/2+"px"})}},{key:"createImage",value:function(t,e){var n=(0,f["default"])(".image",t);return n?n:(n=document.createElement("img"),n.className="image",n.src=this.opts.convert(e),t.appendChild(n),n)}},{key:"setTransform",value:function(t){var e=this.container;this.tx=t,j.has3d?e.style[j.transform]="translate3d("+t+"px,0,0)":e.style[j.transform]="translate("+t+"px)"}},{key:"animate",value:function n(t){function n(){(0,v["default"])(n),r.update()}var e=arguments.length<=1||void 0===arguments[1]?200:arguments[1],i=arguments.length<=2||void 0===arguments[2]?"out-circ":arguments[2];if(t==this.tx)return Promise.resolve(null);this.animating=!0,this.zooms.forEach(function(t){return t.animating=!0});var r=this.tween=(0,g["default"])({x:this.tx}).ease(i).to({x:t}).duration(e);r.update(function(t){o.setTransform(t.x)});var o=this,a=new Promise(function(t){r.on("end",function(){o.zooms.forEach(function(t){return t.animating=!1}),n=function(){},o.animating=!1,t()})});return n(),a}},{key:"positionHolder",value:function(t,e){function n(){(0,v["default"])(n),o.update()}var i=arguments.length<=2||void 0===arguments[2]||arguments[2],r=this.holder;if(!r)return Promise.resolve(null);e&&(r.style.backgroundImage="url('"+e+"')");var o=(0,g["default"])({width:parseInt(r.style.width,10),height:parseInt(r.style.height,10),left:parseInt(r.style.left,10),top:parseInt(r.style.top,10),opacity:.3}).ease("out-cube").to({width:parseInt(t.style.width,10),height:parseInt(t.style.height,10),left:parseInt(t.style.left,10),top:this.container.clientHeight/2+parseInt(t.style.marginTop,10),opacity:1}).duration(300);o.update(function(t){var e=i?t.opacity:1;(0,O["default"])(r.style,{width:t.width+"px",height:t.height+"px",left:t.left+"px",top:t.top+"px",opacity:e})});var a=this,s=new Promise(function(t){o.on("end",function(){r.parentNode&&r.parentNode.removeChild(r),a.holder=null,n=function(){},t()})});return n(),s}},{key:"hide",value:function(){var t=this;this.dots&&document.body.removeChild(this.dots),this.zooms.forEach(function(t){t.unbind()}),this.zooms=[],this.status=[],this.container.style.backgroundColor="rgba(0,0,0,0)",setTimeout(function(){document.body.removeChild(t.container)},100)}},{key:"unbind",value:function(){p["default"].unbind(document,"touchstart",this._ontap)}}]),e}(x["default"]);e["default"]=I},function(t,e,n){var i=n(2);t.exports=function(t,e){var n=t.parentNode.childNodes,r=t.tagName;e=e||"active";for(var o=0,a=n.length;o<a;o++){var s=n[o];s&&1===s.nodeType&&s.tagName===r&&(s===t?i(s).add(e):i(s).remove(e))}}},function(t,e,n){function i(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList}try{var r=n(3)}catch(o){var r=n(3)}var a=/\s+/,s=Object.prototype.toString;t.exports=function(t){return new i(t)},i.prototype.add=function(t){if(this.list)return this.list.add(t),this;var e=this.array(),n=r(e,t);return~n||e.push(t),this.el.className=e.join(" "),this},i.prototype.remove=function(t){if("[object RegExp]"==s.call(t))return this.removeMatching(t);if(this.list)return this.list.remove(t),this;var e=this.array(),n=r(e,t);return~n&&e.splice(n,1),this.el.className=e.join(" "),this},i.prototype.removeMatching=function(t){for(var e=this.array(),n=0;n<e.length;n++)t.test(e[n])&&this.remove(e[n]);return this},i.prototype.toggle=function(t,e){return this.list?("undefined"!=typeof e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):("undefined"!=typeof e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)},i.prototype.array=function(){var t=this.el.getAttribute("class")||"",e=t.replace(/^\s+|\s+$/g,""),n=e.split(a);return""===n[0]&&n.shift(),n},i.prototype.has=i.prototype.contains=function(t){return this.list?this.list.contains(t):!!~r(this.array(),t)}},function(t,e){t.exports=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){function n(t,e){return e.querySelector(t)}e=t.exports=function(t,e){return e=e||document,n(t,e)},e.all=function(t,e){return e=e||document,e.querySelectorAll(t)},e.engine=function(t){if(!t.one)throw new Error(".one callback required");if(!t.all)throw new Error(".all callback required");return n=t.one,e.all=t.all,e}},function(t,e){var n=window.addEventListener?"addEventListener":"attachEvent",i=window.removeEventListener?"removeEventListener":"detachEvent",r="addEventListener"!==n?"on":"";e.bind=function(t,e,i,o){return t[n](r+e,i,o||!1),i},e.unbind=function(t,e,n,o){return t[i](r+e,n,o||!1),n}},function(t,e){function n(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-i)),r=setTimeout(t,n);return i=e,r}e=t.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||n;var i=(new Date).getTime(),r=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout;e.cancel=function(t){r.call(window,t)}},function(t,e,n){function i(t){return this instanceof i?(this._from=t,this.ease("linear"),void this.duration(500)):new i(t)}var r=n(8),o=n(9),a=n(10),s=n(11);t.exports=i,r(i.prototype),i.prototype.reset=function(){return this.isArray="array"===a(this._from),this._curr=o(this._from),this._done=!1,this._start=Date.now(),this},i.prototype.to=function(t){return this.reset(),this._to=t,this},i.prototype.duration=function(t){return this._duration=t,this},i.prototype.ease=function(t){if(t="function"==typeof t?t:s[t],!t)throw new TypeError("invalid easing function");return this._ease=t,this},i.prototype.stop=function(){return this.stopped=!0,this._done=!0,this.emit("stop"),this.emit("end"),this},i.prototype.step=function(){if(!this._done){var t=this._duration,e=Date.now(),n=e-this._start,i=n>=t;if(i)return this._from=this._to,this._update(this._to),this._done=!0,this.emit("end"),this;var r=this._from,o=this._to,a=this._curr,s=this._ease,h=(e-this._start)/t,u=s(h);if(this.isArray){for(var c=0;c<r.length;++c)a[c]=r[c]+(o[c]-r[c])*u;return this._update(a),this}for(var l in r)a[l]=r[l]+(o[l]-r[l])*u;return this._update(a),this}},i.prototype.update=function(t){return 0==arguments.length?this.step():(this._update=t,this)}},function(t,e){function n(t){if(t)return i(t)}function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){function i(t){switch(r(t)){case"object":var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=i(t[n]));return e;case"array":for(var e=new Array(t.length),o=0,a=t.length;o<a;o++)e[o]=i(t[o]);return e;case"regexp":var s="";return s+=t.multiline?"m":"",s+=t.global?"g":"",s+=t.ignoreCase?"i":"",new RegExp(t.source,s);case"date":return new Date(t.getTime());default:return t}}var r;try{r=n(10)}catch(o){r=n(10)}t.exports=i},function(t,e){var n=Object.prototype.toString;t.exports=function(t){switch(n.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!==t?"nan":t&&1===t.nodeType?"element":(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t),typeof t)}},function(t,e){e.linear=function(t){return t},e.inQuad=function(t){return t*t},e.outQuad=function(t){return t*(2-t)},e.inOutQuad=function(t){return t*=2,t<1?.5*t*t:-.5*(--t*(t-2)-1)},e.inCube=function(t){return t*t*t},e.outCube=function(t){return--t*t*t+1},e.inOutCube=function(t){return t*=2,t<1?.5*t*t*t:.5*((t-=2)*t*t+2)},e.inQuart=function(t){return t*t*t*t},e.outQuart=function(t){return 1- --t*t*t*t},e.inOutQuart=function(t){return t*=2,t<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},e.inQuint=function(t){return t*t*t*t*t},e.outQuint=function(t){return--t*t*t*t*t+1},e.inOutQuint=function(t){return t*=2,t<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},e.inSine=function(t){return 1-Math.cos(t*Math.PI/2)},e.outSine=function(t){return Math.sin(t*Math.PI/2)},e.inOutSine=function(t){return.5*(1-Math.cos(Math.PI*t))},e.inExpo=function(t){return 0==t?0:Math.pow(1024,t-1)},e.outExpo=function(t){return 1==t?t:1-Math.pow(2,-10*t)},e.inOutExpo=function(t){return 0==t?0:1==t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)},e.inCirc=function(t){return 1-Math.sqrt(1-t*t)},e.outCirc=function(t){return Math.sqrt(1- --t*t)},e.inOutCirc=function(t){return t*=2,t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.inBack=function(t){var e=1.70158;return t*t*((e+1)*t-e)},e.outBack=function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},e.inOutBack=function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)},e.inBounce=function(t){return 1-e.outBounce(1-t)},e.outBounce=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.inOutBounce=function(t){return t<.5?.5*e.inBounce(2*t):.5*e.outBounce(2*t-1)+.5},e["in-quad"]=e.inQuad,e["out-quad"]=e.outQuad,e["in-out-quad"]=e.inOutQuad,e["in-cube"]=e.inCube,e["out-cube"]=e.outCube,e["in-out-cube"]=e.inOutCube,e["in-quart"]=e.inQuart,e["out-quart"]=e.outQuart,e["in-out-quart"]=e.inOutQuart,e["in-quint"]=e.inQuint,e["out-quint"]=e.outQuint,e["in-out-quint"]=e.inOutQuint,e["in-sine"]=e.inSine,e["out-sine"]=e.outSine,e["in-out-sine"]=e.inOutSine,e["in-expo"]=e.inExpo,e["out-expo"]=e.outExpo,e["in-out-expo"]=e.inOutExpo,e["in-circ"]=e.inCirc,e["out-circ"]=e.outCirc,e["in-out-circ"]=e.inOutCirc,e["in-back"]=e.inBack,e["out-back"]=e.outBack,e["in-out-back"]=e.inOutBack,e["in-bounce"]=e.inBounce,e["out-bounce"]=e.outBounce,e["in-out-bounce"]=e.inOutBounce},function(t,e,n){function i(t){if(t)return r(t)}function r(t){for(var e in i.prototype)t[e]=i.prototype[e];return t}t.exports=i,i.prototype.on=i.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=i.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i,r=0;r<n.length;r++)if(i=n[r],i===e||i.fn===e){n.splice(r,1);break}return this},i.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){function n(t,e){function r(e){function n(n){if(e!==n&&(r(),!n.defaultPrevented)){var i=e.preventDefault,o=e.stopPropagation;e.stopPropagation=function(){o.call(e),o.call(n)},e.preventDefault=function(){i.call(e),i.call(n)},t.apply(s,h)}}function r(t){e!==t&&(clearTimeout(u),a.removeEventListener("touchmove",r),i.forEach(function(t){a.removeEventListener(t,n)}))}if(e.touches&&!(e.touches.length>1)){var a=e.target,s=this,h=arguments,u=setTimeout(r,o);a.addEventListener("touchmove",r),i.forEach(function(t){a.addEventListener(t,n)})}}e=e||{};var o=e.timeout||n.timeout;return r.handler=t,r}var i=["touchend"];t.exports=n,n.timeout=200},function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);e=e||{},this.el=t,this.padding=e.padding||0,this.container=t.parentNode,this.container.style.overflow="hidden",this.scale=1,this.maxScale=e.maxScale||5,this.threshold=e.threshold||200,this.fastThreshold=e.fastThreshold||30;var n=t.getBoundingClientRect();this.tapreset=e.tapreset||!1,this.sx=n.left+n.width/2,this.sy=n.top+n.height/2,this.tx=this.ty=0,this.animating=!1,this.pinch=new f(t,this.onPinchMove.bind(this)),this.pinch.on("start",this.onPinchStart.bind(this)),this.pinch.on("end",this.onPinchEnd.bind(this)),d?this.el.style[p+"Origin"]="center center 0px":this.el.style[p+"Origin"]="center center";var a=this._ontap=s(this.ontap.bind(this));o.bind(t,"touchstart",a),this.events=r(t,this),this.docEvents=r(document,this),e.draggable&&(this.events.bind("touchstart"),this.events.bind("touchmove"),this.events.bind("touchend"),this.docEvents.bind("touchend","ontouchend"))}var r=n(15),o=n(5),a=n(12),s=n(13),h=n(6),u=n(7),c=n(19),l=n(24),f=n(25),d=c.has3d,p=c.transform,m=Math.PI;a(i.prototype),i.prototype.ontouchstart=function(t){var e=t.touches;if(e&&1==e.length){this.animating&&this.tween.stop(),this.speed=0;var n=Date.now(),i=t.touches[0],r=i.clientX,o=i.clientY,a=this,s={x:a.tx,y:a.ty},h=this.getLimitation();this.move=function(t,e){a.down={x:r,y:o,at:n};var i=e.clientX,u=e.clientY,c=this.prev?this.prev.x:r,f=this.prev?this.prev.y:o;t.preventDefault();var d=Math.abs(i-c)>Math.abs(u-f);if(1==a.scale||d||t.stopPropagation(),this.draggable===!1&&1==a.scale)return this.emit("move",c-i);a.calcuteSpeed(i,u);var p=s.x+i-r,v=s.y+u-o,y=l.limit(p,v,h),g=y.x-p;1==a.scale&&d&&(y.y=this.ty,this.angle=i-c>0?0:m),this.emit("move",g),a.setTransform(y.x,y.y,a.scale)}}},i.prototype.ontouchmove=function(t){if(this.move&&!this.animating&&!this.pinch.pinching){var e=t.touches;if(!e||1!=e.length)return void(this.move=null);var n=e[0];this.move(t,n)}},i.prototype.ontouchend=function(t){if(this.down){var e=Date.now(),n=t.changedTouches[0],i=n.clientX;if(Math.abs(i-this.down.x)>this.fastThreshold&&e-this.down.at<this.threshold){var r=i>this.down.x?"right":"left",o=this.getLimitation();(1==this.scale||this.tx<=o.minx||this.tx>=o.maxx)&&this.emit("swipe",r)}else this.emit("end");this.down=this.move=null,this.animating||this.pinch.pinching||(t.stopPropagation(),this.speed&&this.momentum())}},i.prototype.momentum=function(){var t=.001,e=this.getLimitation(),n=Math.min(this.speed,3),i=(4-m)/2,r=i*(n*n)/(2*t),o=this.tx+r*Math.cos(this.angle),a=this.ty+r*Math.sin(this.angle),s=l.limit(o,a,e),h=this.scale>1&&(o<e.minx||o>e.maxx),u=h?"out-back":"linear",c=h?100+n/t:n/t;return this.animate({x:s.x,y:s.y,scale:this.scale},c,u)},i.prototype.getLimitation=function(){var t=l.viewport,e=t.width,n=t.height,i=this.el.getBoundingClientRect();return{maxx:this.tx-i.left+this.padding,minx:this.tx-(i.left+i.width-e)-this.padding,miny:n>i.height?this.ty-i.top:this.ty-i.top-(i.height-n),maxy:n>i.height?this.ty+(n-i.top-i.height):this.ty-i.top}},i.prototype.ontap=function(){var t=Date.now();if(this.lastTap&&t-this.lastTap<300)return void this.emit("tap");if(!this.animating){if(1==this.scale)return void this.emit("tap");this.lastTap=Date.now(),this.tapreset?this.reset():this.emit("tap")}},i.prototype.reset=function(){this.emit("scale",{x:0,y:0,scale:1});var t=this.animate({x:0,y:0,scale:1},200);return t},i.prototype.onPinchStart=function(t){this.animating&&this.tween.stop(),this.start=t,this.bx=this.sx+this.tx,this.by=this.sy+this.ty,this.startScale=this.scale,this.emit("start")},i.prototype.onPinchMove=function(t){if(!this.animating){this.point={x:t.x,y:t.y};var e=t.x-this.start.x,n=t.y-this.start.y,i=this.bx+e,r=this.by+n,o=l.getAngle(i,r,t.x,t.y),a=l.distance([t.y,t.x,r,i])*(t.scale-1),s=this.bx-this.sx+e-a*Math.cos(o),h=this.by-this.sy+n-a*Math.sin(o);this.setTransform(s,h,t.scale*this.startScale)}},i.prototype.onPinchEnd=function(){this.scale!==this.startScale&&this.emit("scale",{x:this.tx,y:this.ty,scale:this.scale}),this.startScale=this.scale;var t=this.checkScale();t||this.checkPosition()},i.prototype.setTransform=function(t,e,n){this.tx=t,this.ty=e,this.scale=n,d?this.el.style[p]="translate3d("+t+"px, "+e+"px, 0)  scale3d("+n+","+n+", 1)":this.el.style[p]="translate("+t+"px, "+e+"px)  scale("+n+","+n+")"},i.prototype.animate=function(t,e,n){function i(){h(i),a.update()}var r={x:this.tx,y:this.ty,scale:this.scale};n=n||"out-circ";var o=this;this.animating=!0;var a=this.tween=u(r).ease(n).to(t).duration(e);a.update(function(t){o.setTransform(t.x,t.y,t.scale)});var s=new Promise(function(t){a.on("end",function(){i=function(){},o.animating=!1,t()})});return i(),s},i.prototype.unbind=function(){this.setTransform(0,0,1),this.pinch.unbind(),this.events.unbind(),this.docEvents.unbind(),o.unbind(this.el,"touchstart",this._ontap)},i.prototype.checkPosition=function(){var t=this.el.getBoundingClientRect(),e={x:this.tx,y:this.ty,scale:this.scale},n=l.viewport,i=n.width,r=n.height;t.left>0?e.x=this.tx-t.left:t.left+t.width<i&&(e.x=this.tx+(i-t.left-t.width));var o=t.top+t.height;return t.top>0&&o>r?e.y=this.ty-(o-r):t.top<0&&o<r&&(e.y=this.ty-t.top),this.animate(e,200)},i.prototype.checkScale=function(){if(this.scale<1)return this.reset();if(this.scale>this.maxScale){var t=this.point;return this.scaleAt(t.x,t.y,this.maxScale)}},i.prototype.limitScale=function(t){var e=this.sx+this.tx,n=this.sy+this.ty,i=this.point,r=Math.atan((i.y-n)/(i.x-e));(i.y<n&&i.x<e||i.y>n&&i.x<e)&&(r+=m);var o=l.distance([i.y,i.x,n,e])*(this.scale-t),a=this.tx+o*Math.cos(r),s=this.ty+o*Math.sin(r);return this.animate({x:a,y:s,scale:t},200)},i.prototype.scaleAt=function(t,e,n){var i=this.sx+this.tx,r=this.sy+this.ty,o=l.getAngle(i,r,t,e),a=l.distance([e,t,r,i])*(1-n/this.scale),s=this.tx+a*Math.cos(o),h=this.ty+a*Math.sin(o);return this.animate({x:s,y:h,scale:n},300)},i.prototype.calcuteSpeed=function(t,e){var n=this.prev||this.down,i=Date.now(),r=i-n.at;if(i-this.down.at<50||r>50){var o=l.distance([n.x,n.y,t,e]);this.speed=Math.abs(o/r),this.angle=l.getAngle(n.x,n.y,t,e)}r>50&&(this.prev={x:t,y:e,at:i})},t.exports=i},function(t,e,n){function i(t,e){if(!(this instanceof i))return new i(t,e);if(!t)throw new Error("element required");if(!e)throw new Error("object required");this.el=t,this.obj=e,this._events={}}function r(t){var e=t.split(/ +/);return{name:e.shift(),selector:e.join(" ")}}try{var o=n(5)}catch(a){var o=n(5)}try{var s=n(16)}catch(a){var s=n(16)}t.exports=i,i.prototype.sub=function(t,e,n){this._events[t]=this._events[t]||{},this._events[t][e]=n},i.prototype.bind=function(t,e){function n(){var t=[].slice.call(arguments).concat(c);h[e].apply(h,t)}var i=r(t),a=this.el,h=this.obj,u=i.name,e=e||"on"+u,c=[].slice.call(arguments,2);return i.selector?n=s.bind(a,i.selector,u,n):o.bind(a,u,n),this.sub(u,e,n),n},i.prototype.unbind=function(t,e){if(0==arguments.length)return this.unbindAll();if(1==arguments.length)return this.unbindAllOf(t);var n=this._events[t];if(n){var i=n[e];i&&o.unbind(this.el,t,i)}},i.prototype.unbindAll=function(){for(var t in this._events)this.unbindAllOf(t)},i.prototype.unbindAllOf=function(t){var e=this._events[t];if(e)for(var n in e)this.unbind(t,n)}},function(t,e,n){try{var i=n(17)}catch(r){var i=n(17)}try{var o=n(5)}catch(r){var o=n(5)}e.bind=function(t,e,n,r,a){return o.bind(t,n,function(n){var o=n.target||n.srcElement;n.delegateTarget=i(o,e,!0,t),n.delegateTarget&&r.call(t,n)},a)},e.unbind=function(t,e,n,i){o.unbind(t,e,n,i)}},function(t,e,n){function i(t,e,n){for(n=n||document.documentElement;t&&t!==n;){if(r(t,e))return t;t=t.parentNode}return r(t,e)?t:null}try{var r=n(18)}catch(o){var r=n(18)}t.exports=i},function(t,e,n){function i(t,e){if(!t||1!==t.nodeType)return!1;if(s)return s.call(t,e);for(var n=r.all(e,t.parentNode),i=0;i<n.length;++i)if(n[i]==t)return!0;return!1}try{var r=n(4)}catch(o){var r=n(4)}var a=Element.prototype,s=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;t.exports=i},function(t,e,n){var i=null;!function(){for(var t=["webkitTransform","MozTransform","msTransform","OTransform","transform"],e=document.createElement("p"),n=0;n<t.length;n++)if(null!=e.style[t[n]]){i=t[n];break}}();var r=null;!function(){var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},e=document.createElement("p");for(var n in t)if(null!=e.style[n]){r=t[n];break}}(),e.transitionend=r,e.transition=n(20),e.transform=i,e.touchAction=n(21),e.has3d=n(22)},function(t,e){for(var n,i=["webkitTransition","MozTransition","OTransition","msTransition","transition"],r=document.createElement("p"),o=0;o<i.length;o++)if(null!=r.style[i[o]]){n=i[o];break}r=null,t.exports=n},function(t,e){function n(t){t||(t=document);var e=t.createElement("div"),n=null;return"touchAction"in e.style?n="touchAction":"msTouchAction"in e.style&&(n="msTouchAction"),e=null,n}t.exports=n()},function(t,e,n){var i=n(23);if(i&&window.getComputedStyle){var r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},o=document.createElement("div");o.style[i]="translate3d(1px,1px,1px)",document.body.insertBefore(o,null);var a=getComputedStyle(o).getPropertyValue(r[i]);document.body.removeChild(o),t.exports=null!=a&&a.length&&"none"!=a}else t.exports=!1},function(t,e){for(var n,i=["webkitTransform","MozTransform","msTransform","OTransform","transform"],r=document.createElement("p"),o=0;o<i.length;o++)if(n=i[o],null!=r.style[n]){t.exports=n;break}},function(t,e){e.distance=function(t){var e=Math.pow(t[0]-t[2],2),n=Math.pow(t[1]-t[3],2);return Math.sqrt(e+n)};e.midpoint=function(t){var e={};return e.x=(t[0]+t[2])/2,e.y=(t[1]+t[3])/2,e},Object.defineProperty(e,"viewport",{get:function(){return{height:Math.max(document.documentElement.clientHeight,window.innerHeight||0),width:Math.max(document.documentElement.clientWidth,window.innerWidth||0)}}}),e.getAngle=function(t,e,n,i){if(t==n&&e==i)return 0;var r=Math.atan((i-e)/(n-t));return n<t?r+Math.PI:r},e.limit=function(t,e,n){return t<n.minx?t=n.minx:t>n.maxx&&(t=n.maxx),e<n.miny?e=n.miny:e>n.maxy&&(e=n.maxy),{x:t,y:e}}},function(t,e,n){function i(t,e){return this instanceof i?(this.el=t,this.parent=t.parentNode,this.fn=e||function(){},this.midpoint=null,this.scale=1,this.lastScale=1,this.pinching=!1,this.events=r(t,this),this.events.bind("touchstart"),this.events.bind("touchmove"),this.events.bind("touchend"),void(this.fingers={})):new i(t,e)}var r=n(15),o=n(12),a=n(26),s=n(24);t.exports=i,o(i.prototype),i.prototype.ontouchstart=function(t){var e=t.touches;if(!e||2!=e.length)return this;t.preventDefault(),t.stopPropagation();for(var n,i=[],r=0;r<e.length;r++)n=e[r],i.push(n.clientX,n.clientY);return this.pinching=!0,this.distance=s.distance(i),this.midpoint=s.midpoint(i),this.emit("start",this.midpoint),this},i.prototype.ontouchmove=function(t){var e=t.touches;if(!e||2!=e.length||!this.pinching)return this;t.preventDefault(),t.stopPropagation();for(var n,i=[],r=0;r<e.length;r++)n=e[r],i.push(n.clientX,n.clientY);var o=(t.changedTouches,s.distance(i)),h=s.midpoint(i);return t=a(t),t.scale=o/this.distance*this.scale,t.x=h.x,t.y=h.y,this.fn(t),this.lastScale=t.scale,this},i.prototype.ontouchend=function(t){var e=t.touches;return e&&2!=e.length&&this.pinching?(this.scale=this.lastScale,this.pinching=!1,this.emit("end"),this):this},i.prototype.unbind=function(){return this.events.unbind(),this}},function(t,e){function n(){}t.exports=function(t){return n.prototype=t,new n}},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function i(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}var r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=i()?Object.assign:function(t,e){for(var i,a,s=n(t),h=1;h<arguments.length;h++){i=Object(arguments[h]);for(var u in i)r.call(i,u)&&(s[u]=i[u]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(s[a[c]]=i[a[c]])}}return s}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=document.createElement("canvas");t.appendChild(e);var n=t.getBoundingClientRect(),i=e.getContext("2d");return e.height=n.height,e.width=n.width,(0,s["default"])(e),i}function o(t){4==t.length&&(t=t.replace(/[^#]/g,function(t){return t+t}));var e=c.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t,e){function n(r){if(i.clearRect(0,0,s,a),!m){v||(v=r),t.parentNode||(m=!0);var o=(r-v)%h;i.beginPath(),i.strokeStyle="rgba("+l.r+", "+l.g+", "+l.b+", 0.4)",i.arc(f,d,p,0,2*Math.PI),i.lineWidth=e.width||4,i.lineCap="round",i.stroke();var c=-Math.PI/2+2*Math.PI*o/h,y=c+Math.PI/2;i.beginPath(),i.strokeStyle="rgba("+l.r+", "+l.g+", "+l.b+", 1)",i.arc(f,d,p,c,y),i.stroke(),(0,u["default"])(n)}}e=e||[];var i=r(t),a=t.clientHeight||32,s=t.clientWidth||32,h=e.duration||1e3,c=e.color||"#ffffff",l=o(c),f=a/2,d=s/2,p=Math.min(a,s)/2-4,m=void 0,v=void 0;
return(0,u["default"])(n),function(){m=!0}};var a=n(29),s=i(a),h=n(6),u=i(h),c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i},function(t,e){t.exports=function(t){var e=t.getContext("2d"),n=window.devicePixelRatio||1;return 1!=n&&(t.style.width=t.width+"px",t.style.height=t.height+"px",t.width*=n,t.height*=n,e.scale(n,n)),t}},function(t,e){function n(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var i=n[1];if("body"==i){var r=e.createElement("html");return r.innerHTML=t,r.removeChild(r.lastChild)}var a=o[i]||o._default,s=a[0],h=a[1],u=a[2],r=e.createElement("div");for(r.innerHTML=h+t+u;s--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(var c=e.createDocumentFragment();r.firstChild;)c.appendChild(r.removeChild(r.firstChild));return c}t.exports=n;var i,r=!1;"undefined"!=typeof document&&(i=document.createElement("div"),i.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',r=!i.getElementsByTagName("link").length,i=void 0);var o={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:r?[1,"X<div>","</div>"]:[0,"",""]};o.td=o.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],o.option=o.optgroup=[1,'<select multiple="multiple">',"</select>"],o.thead=o.tbody=o.colgroup=o.caption=o.tfoot=[1,"<table>","</table>"],o.polyline=o.ellipse=o.polygon=o.circle=o.text=o.line=o.path=o.rect=o.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]}])});